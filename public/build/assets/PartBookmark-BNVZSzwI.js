import{g as z,h as E}from"./index-BEdA3Klw.js";import{_ as U}from"./DialogLoginRequires-6OIpYPcZ.js";import{l as $,B as j,s as f,r as t,j as F,a,o as r,c as u,b as l,q as L,d as A,w as i,F as D,k as I,g as O,C as P,u as _,f as W,t as G,z as H}from"./app-BtiNWB6H.js";import{u as J}from"./index-DvnQVTUj.js";import{u as K}from"./AppStore-DKM8NI6Z.js";const M={class:"relative"},Q={key:0,class:"absolute -right-2 -top-2"},se={__name:"PartBookmark",props:{title:{type:Object,required:!0}},setup(k){const p=k,m=$.useToast(),g=K(),b=J(),h=j(),{getConfig:x}=f(g),{isLogged:y}=f(h),d=t(null),n=t(!1),o=t(p.title.bookmark),v=t(null),c=t(!1);F(o,()=>{c.value||(clearTimeout(v.value),v.value=setTimeout(B,500))});const B=C=>{if(!y.value){d.value.open(),c.value=!0,o.value=null,H(()=>c.value=!1);return}n.value=!0,b.$toggle(p.title.id,o.value,{success:()=>{m.success("Сохранено успешно")},error:e=>{m.error(E(e))},finish:()=>{n.value=!1}})};return(C,e)=>{const S=a("v-progress-circular"),V=a("v-chip"),T=a("v-item"),w=a("v-item-group");return r(),u("div",M,[n.value?(r(),u("div",Q,[l(S,{color:"primary",indeterminate:"",size:20,width:2})])):L("",!0),e[1]||(e[1]=A("div",{class:"text-caption mb-2"},"Добавить в закладки",-1)),l(w,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),"selected-class":"bg-primary",class:"flex flex-wrap gap-2"},{default:i(()=>[(r(!0),u(D,null,I(_(x).bookmarks,(s,q)=>(r(),O(T,{key:q,value:s.id},{default:i(({selectedClass:N,toggle:R})=>[l(V,{class:P(N),density:"compact",label:"",onClick:R,"prepend-icon":_(z)(s.name)},{default:i(()=>[W(G(s.name),1)]),_:2},1032,["class","onClick","prepend-icon"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(U,{ref_key:"loginRequires",ref:d},null,512)])}}};export{se as default};
