import{_ as T}from"./AppLayout-DZNOa1b7.js";import{p as A,r as n,l as C,a as o,o as w,c as E,b as l,u as $,Z as F,w as a,d as m,g as j,v as z,f,F as I}from"./app-Dxtfsv7s.js";import{h as O}from"./index-BEdA3Klw.js";import"./Navbar-N91oy_VA.js";import"./TitleRating-Cq9kWLOw.js";import"./Footer-BfW0S3g6.js";const R={class:"relative"},S={class:"inline-flex items-center gap-2 mb-4"},Z={class:"bg-second rounded-lg shadow-lg overflow-hidden"},M={__name:"Index",props:{settings:Object,translations:Array,qualities:Array,visibilities:Array},setup(g){const s=g,b=A.useToast(),r=n("notifications"),v=n(!1),u=n({quality:s.qualities,translation:s.translations,visibility:s.visibilities}),i=n({notifications:{comment_reply:s.settings.notifications.comment_reply,site_updates:s.settings.notifications.site_updates,news_alerts:s.settings.notifications.news_alerts},player:{default_quality:s.settings.player.default_quality,default_translation:s.settings.player.default_translation},privacy:{list_visibility:s.settings.privacy.list_visibility,history_visibility:s.settings.privacy.history_visibility}}),V=n(null);C(i,()=>{clearTimeout(V.value),V.value=setTimeout(x,1e3)},{deep:!0});const x=()=>{v.value=!0,axios.post(route("upi.settings.save"),{settings:i.value}).then(({data:p})=>{b.success("Сохранено успешно")}).catch(({response:p})=>{b.error(O(p))}).finally(()=>{v.value=!1})};return(p,e)=>{const U=o("v-progress-circular"),c=o("v-tab"),q=o("v-tabs"),y=o("v-switch"),_=o("v-tabs-window-item"),d=o("v-select"),k=o("v-tabs-window"),B=o("v-card-text"),N=o("v-card");return w(),E(I,null,[l($(F),{title:"Настройки"}),l(T,null,{default:a(()=>[m("div",R,[m("div",S,[e[9]||(e[9]=m("div",{class:"text-xl font-medium"},"Настройки",-1)),v.value?(w(),j(U,{key:0,color:"primary",indeterminate:"",size:18,width:2})):z("",!0)]),m("div",Z,[l(N,{elevation:"0"},{default:a(()=>[l(q,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),density:"compact","slider-color":"primary"},{default:a(()=>[l(c,{value:"notifications",class:"text-none","prepend-icon":"mdi-bell-outline"},{default:a(()=>e[10]||(e[10]=[f(" Уведомления ")])),_:1}),l(c,{value:"player",class:"text-none","prepend-icon":"mdi-play-circle-outline"},{default:a(()=>e[11]||(e[11]=[f(" Плеер ")])),_:1}),l(c,{value:"privacy",class:"text-none","prepend-icon":"mdi-lock-outline"},{default:a(()=>e[12]||(e[12]=[f(" Конфиденциальность ")])),_:1})]),_:1},8,["modelValue"]),l(B,{class:"!p-0"},{default:a(()=>[l(k,{modelValue:r.value,"onUpdate:modelValue":e[8]||(e[8]=t=>r.value=t)},{default:a(()=>[l(_,{value:"notifications",class:"p-4"},{default:a(()=>[l(y,{modelValue:i.value.notifications.comment_reply,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.notifications.comment_reply=t),color:"primary","hide-details":"",density:"comfortable",label:"Получать уведомления о новых ответах на мои комментарии"},null,8,["modelValue"]),l(y,{modelValue:i.value.notifications.site_updates,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.notifications.site_updates=t),color:"primary","hide-details":"",density:"comfortable",label:"Получать уведомления об обновлениях сайта"},null,8,["modelValue"]),l(y,{modelValue:i.value.notifications.news_alerts,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.notifications.news_alerts=t),color:"primary","hide-details":"",density:"comfortable",label:"Получать новостные уведомления"},null,8,["modelValue"])]),_:1}),l(_,{value:"player",class:"p-4 inline-flex gap-4"},{default:a(()=>[l(d,{modelValue:i.value.player.default_translation,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.player.default_translation=t),label:"Озвучка по умолчанию",items:u.value.translation,"item-props":t=>({title:t.title,subtitle:`Озвучено тайтлов: ${t.titles_count}`}),"item-title":"title","item-value":"id",variant:"filled",density:"comfortable",searchable:"",class:"w-1/2"},null,8,["modelValue","items","item-props"]),l(d,{modelValue:i.value.player.default_quality,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.player.default_quality=t),label:"Качество по умолчанию",items:u.value.quality,"item-title":"name","item-value":"id",variant:"filled",density:"comfortable",class:"w-1/2"},null,8,["modelValue","items"])]),_:1}),l(_,{value:"privacy",class:"p-4 inline-flex gap-4"},{default:a(()=>[l(d,{modelValue:i.value.privacy.list_visibility,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.privacy.list_visibility=t),label:"Кто может видеть мои закладки",items:u.value.visibility,variant:"filled",density:"comfortable","item-title":"name","item-value":"id",searchable:"",class:"w-1/2"},null,8,["modelValue","items"]),l(d,{modelValue:i.value.privacy.history_visibility,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.privacy.history_visibility=t),label:"Кто может видеть мою историю",items:u.value.visibility,variant:"filled",density:"comfortable","item-title":"name","item-value":"id",searchable:"",class:"w-1/2"},null,8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])]),_:1})],64)}}};export{M as default};
