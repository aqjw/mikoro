import{g as E,h as U}from"./index-BEdA3Klw.js";import{_ as $}from"./DialogLoginRequires-Cfdfq1lF.js";import{p as z,C as A,s as f,r as t,l as D,a,o as r,c as u,b as l,v as F,d as L,w as i,F as j,n as I,g as O,D as P,u as _,f as W,t as G,A as H}from"./app-NDYpDbYO.js";import{u as J}from"./index-NaxavAuR.js";import{u as K}from"./AppStore-asDa8RCQ.js";const M={class:"relative"},Q={key:0,class:"absolute -right-2 -top-2"},se={__name:"PartBookmark",props:{title:{type:Object,required:!0}},setup(k){const p=k,m=z.useToast(),g=K(),b=J(),h=A(),{getConfig:x}=f(g),{isLogged:y}=f(h),d=t(null),n=t(!1),o=t(p.title.bookmark),v=t(null),c=t(!1);D(o,()=>{c.value||(clearTimeout(v.value),v.value=setTimeout(C,500))});const C=B=>{if(!y.value){d.value.open(),c.value=!0,o.value=null,H(()=>c.value=!1);return}n.value=!0,b.$toggle(p.title.id,o.value,{success:()=>{m.success("Сохранено успешно")},error:e=>{m.error(U(e))},finish:()=>{n.value=!1}})};return(B,e)=>{const S=a("v-progress-circular"),V=a("v-chip"),T=a("v-item"),w=a("v-item-group");return r(),u("div",M,[n.value?(r(),u("div",Q,[l(S,{color:"primary",indeterminate:"",size:20,width:2})])):F("",!0),e[1]||(e[1]=L("div",{class:"text-caption mb-2"},"Добавить в закладки",-1)),l(w,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),"selected-class":"bg-primary",class:"flex flex-wrap gap-2"},{default:i(()=>[(r(!0),u(j,null,I(_(x).bookmarks,(s,N)=>(r(),O(T,{key:N,value:s.id},{default:i(({selectedClass:R,toggle:q})=>[l(V,{class:P(R),density:"compact",label:"",onClick:q,"prepend-icon":_(E)(s.name)},{default:i(()=>[W(G(s.name),1)]),_:2},1032,["class","onClick","prepend-icon"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l($,{ref_key:"loginRequires",ref:d},null,512)])}}};export{se as default};
